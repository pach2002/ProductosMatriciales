     1                                 %line 1+1 test.asm
     2                                 [section .data]
     3 00000000 696E7075742E747874-     filename db "input.txt", 0
     4 00000000 00                 
     5 0000000A 00<rept>                buffer times 256 db 0
     6                                 
     7                                 [section .text]
     8                                 [global _start]
     9                                  _start:
    10                                 
    11 00000000 48C7C002000000          mov rax, 2
    12 00000007 48C7C7[00000000]        mov rdi, filename
    13 0000000E 48C7C600000000          mov rsi, 0
    14 00000015 4831D2                  xor rdx, rdx
    15 00000018 0F05                    syscall
    16                                 
    17 0000001A 4885C0                  test rax, rax
    18 0000001D 7861                    js file_error
    19                                 
    20 0000001F 4889C7                  mov rdi, rax
    21                                 
    22                                 
    23 00000022 48C7C000000000          mov rax, 0
    24 00000029 48C7C6[00000000]        mov rsi, buffer
    25 00000030 48C7C200010000          mov rdx, 256
    26 00000037 0F05                    syscall
    27                                 
    28                                 
    29 00000039 4831C9                  xor rcx, rcx
    30 0000003C 48C7C7[00000000]        mov rdi, buffer
    31 00000043 8A07                    mov al, byte [rdi]
    32                                  count_length:
    33 00000045 84C0                    test al, al
    34 00000047 7408                    jz print_contents
    35 00000049 48FFC1                  inc rcx
    36 0000004C 48FFC7                  inc rdi
    37 0000004F 8A07                    mov al, byte [rdi]
    38 00000051 EBF0                    jmp count_length
    39                                 
    40                                  print_contents:
    41                                 
    42 00000053 48C7C001000000          mov rax, 1
    43 0000005A 48C7C701000000          mov rdi, 1
    44 00000061 48C7C6[00000000]        mov rsi, buffer
    45 00000068 4889CA                  mov rdx, rcx
    46 0000006B 0F05                    syscall
    47                                 
    48                                 
    49 0000006D 48C7C003000000          mov rax, 3
    50 00000074 0F05                    syscall
    51                                 
    52                                 
    53 00000076 48C7C03C000000          mov rax, 60
    54 0000007D 4831FF                  xor rdi, rdi
    55 00000080 0F05                    syscall
    56                                 
    57                                  file_error:
    58                                 
    59                                 
